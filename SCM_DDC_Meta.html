<!DOCTYPE html>
<html>
<script src='./util/messagingUtil.js'></script>

<head>
    <title>Metadata Management</title>
    <link rel="stylesheet" type="text/css" href="./styles.css">
</head>

<body>

    <div class="container">
        <div class="summary-type-container">
            <label for="summaryTypeSelect">Contrat Name :</label>
            <p><b><span id="contractName"></span></b></p>
        </div>
        <div class="summary-type-container">
            <label for="summaryTypeSelect">Contrat Type :</label>
            <p><span id="contractType"></span></p>
        </div>
        <div class="summary-type-container">
            <label for="summaryTypeSelect">Edition date :</label>
            <p><span id="editionDate"></span></p>
        </div>

        <p />
        <div class="row">

            <!--<div class="divBox">-->
            <div class="column">
                <div class="summary-type-container">
                    <label for="summaryTypeSelect"><b>Supplier</b></label>
                    </p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Name :</label>
                    <p><span id="supplierName"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Address :</label>
                    <p><span id="supplierAddress"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Country :</label>
                    <p><span id="supplierCountry"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Registration Number :</label>
                    <p><span id="supplierRegNumber"></span></p>
                </div>
            </div>
            <!--<div class="divBox">-->
            <div class="column">
                <div class="summary-type-container">
                    <label for="summaryTypeSelect"><b>Customer</b></label>
                    </p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Name :</label>
                    <p><span id="customerName"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Address :</label>
                    <p><span id="customerAddress"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Country :</label>
                    <p><span id="customerCountry"></span></p>
                </div>
                <div class="summary-type-container">
                    <label for="summaryTypeSelect">Registration Number :</label>
                    <p><span id="customerRegNumber"></span></p>
                </div>
            </div>
        </div>



    </div>

    <script>

        va.messagingUtil.setOnDataReceivedCallback(onDataReceived);

        /* Defined the callback function called whenever there is a new message sent from VA */
        function onDataReceived(vaMsgObj) {

            if (vaMsgObj && vaMsgObj.data && vaMsgObj.data.length > 0) {

                console.log("*** NB lignes=", vaMsgObj.rowCount);

                document.getElementById("contractName").textContent = vaMsgObj.data[0][0];
                document.getElementById("contractType").innerHTML = vaMsgObj.data[0][1];
                document.getElementById("editionDate").innerHTML = vaMsgObj.data[0][2];

                console.log("*** Get supplier infos");
                document.getElementById("supplierName").innerHTML = vaMsgObj.data[0][3];
                document.getElementById("supplierAddress").innerHTML = vaMsgObj.data[0][4];
                document.getElementById("supplierCountry").innerHTML = vaMsgObj.data[0][5];
                document.getElementById("supplierRegNumber").innerHTML = vaMsgObj.data[0][6];

                console.log("*** Get customer infos");
                document.getElementById("customerName").innerHTML = vaMsgObj.data[1][3];
                document.getElementById("customerAddress").innerHTML = vaMsgObj.data[1][4];
                document.getElementById("customerCountry").innerHTML = vaMsgObj.data[1][5];
                document.getElementById("customerRegNumber").innerHTML = vaMsgObj.data[1][6];

            }
        }

    </script>

</body>

</html>